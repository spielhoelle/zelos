!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";n(2),n(3),n(4),n(5),n(6),$(document).on("turbolinks:load",(function(){Waves.displayEffect(),$(".button-collapse").sidenav()}))},function(e,t,n){"use strict";var r=document.getElementsByTagName("body")[0],o=document.querySelectorAll(".flash-alert");if(document.querySelectorAll(".flash-alert").length>0){r.addEventListener("click",(function(e){for(var t=function(e){setTimeout((function(){o[e].classList.remove("in")}),100)},n=0;n<o.length;n++)t(n)}));for(var i=function(e){setTimeout((function(){o[e].classList.remove("in")}),2e3)},s=0;s<o.length;s++)i(s)}},function(e,t,n){"use strict";$(document).ready((function(){$(".parallax").parallax()})),$(document).ready((function(){$(".fixed-action-btn").floatingActionButton()}))},function(e,t,n){},function(e,t,n){"use strict";var r=document.querySelectorAll(".collapsible"),o=(M.Collapsible.init(r),document.getElementById("ca_ching"));if(o){var i=window.location.toString();if(i.indexOf("?")>0){o.play();var s=i.substring(0,i.indexOf("?"));window.history.replaceState({},document.title,s)}}document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll("select"),t=M.FormSelect.init(e,{});console.log("instances",t);var n=document.getElementById("entry_is_offer");n&&(n.onchange=function(){var e=!0,n=!1,r=void 0;try{for(var o,i=t[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var s=o.value;s.el.dataset.name==this.id&&(1==this.checked?(console.log("instance.el.dataset.name == this.id",s.el.dataset.name,this.id),s.open()):s.close())}}catch(e){n=!0,r=e}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}});var r=document.getElementById("entry_sum_time");r&&(r.onchange=function(){if(1==this.checked){document.getElementById("entry_delivery_date").disabled=!1;var e=!0,t=!1,n=void 0;try{for(var r,o=document.querySelectorAll("fieldset .d-flex > .input-field:first-child input")[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){r.value.disabled=!0}}catch(e){t=!0,n=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw n}}}else{document.getElementById("entry_delivery_date").disabled=!0;var i=!0,s=!1,a=void 0;try{for(var c,u=document.querySelectorAll("fieldset .d-flex > .input-field:first-child input")[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){c.value.disabled=!1}}catch(e){s=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(s)throw a}}}})})),$((function(){$(".sortable").railsSortable({placeholder:"ui-state-highlight"}),$(".nested_index").each((function(){this.parentElement.id="Item_"+this.innerText}))})),$(document).on("click",".note-part",(function(){$("#entry_notes").val($("#entry_notes").text()+"\n"+this.dataset.value),$("#entry_notes").prev().addClass("active")})),$(document).on("fields_added.nested_form_fields",(function(e,t){$(".nested_entry_items").last().find("input:first").focus()})),$(document).on("fields_added.nested_form_fields",(function(e,t){$(".nested_entry_items").last().find("input:first").focus()})),$(document).ready((function(){$(".modal").modal({dismissible:!0,opacity:.5,inDuration:300,outDuration:200,startingTop:"4%",endingTop:"10%",ready:function(e,t){$("#user_email").focus().click()},complete:function(){}})})),$(document).on("turbolinks:load",(function(){$("body").hasClass("customers")||$("body").hasClass("entries-edit")||$("body").hasClass("entries-new")?($((function(){$.ajax({dataType:"json",url:"/admin/customers",type:"GET",success:function(e){var t={},n={};e.forEach((function(e,r){t[e.name]=null,n[e.name]=[e.address,e.company,e.id]})),$(".autocomplete").autocomplete({data:t,limit:20,onAutocomplete:function(e){$("body").hasClass("customers-index")&&$("form#search-form").submit();var t=$("#entry_customer_attributes_id"),r=$("#entry_customer_attributes_address"),o=$("#entry_customer_attributes_company");t.val(n[e][2]),r.val(n[e][0]).prop("readonly",!0),o.val(n[e][1]).prop("readonly",!0),r.prev().addClass("active"),o.prev().addClass("active")},minLength:0})}})})),$(".autocomplete").on("change",(function(e){if(""===$(e.currentTarget).val()){var t=$("#entry_customer_attributes_address, #entry_customer_attributes_company, #entry_customer_attributes_id");t.val("").prop("readonly",!1),t.prev().removeClass("active")}}))):$("body").hasClass("entries-index")&&$((function(){$.ajax({dataType:"json",url:"/admin/entries",type:"GET",success:function(e){var t={},n={};e.forEach((function(e,r){t[e.title]=null,n[e.title]=[e.title,e.id]})),$(".autocomplete").autocomplete({data:t,limit:20,onAutocomplete:function(e){$("form#search-form").submit()},minLength:0})}})}))}))},function(e,t,n){"use strict";var r,o=n(7),i=(r=o)&&r.__esModule?r:{default:r};document.getElementById("bill_image")&&(document.getElementById("bill_image").onchange=function(e){if(this.files&&this.files[0]){var t=new FileReader;t.onload=function(e){document.createElement("img").src=e.target.result,document.querySelector(".materialboxed").src=e.target.result},t.readAsDataURL(this.files[0])}document.getElementById("image_text").classList.add("fade-in"),document.getElementById("image_loader").classList.remove("fade-in"),i.default.recognize(this.files[0],{lang:"deu"}).progress((function(e){console.log("progress is: ",e),"recognizing text"===e.status&&(document.getElementById("image_loader").querySelector(".determinate").style.width=100*e.progress+"%")})).then((function(e){console.log(e),document.getElementById("image_loader").classList.add("fade-in"),document.querySelector(".material-placeholder").classList.add("half-transparent"),document.getElementById("image_result").innerHTML=e.html,$(".ocrx_word").attr("style",(function(){return function(e){var t="",n=null!==e.firstElementChild?e.firstElementChild:e;console.log(n),n.style="border: 1px solid white",n.innerText.match(/[0-9]/g)&&(n.style="border: 1px solid red",t+="color: red !important; ");var r=e.title.split(" ").map((function(e){return e.replace(/[^0-9]/g," ").replace(" ","")})),o=document.querySelector(".ocr_page").title.replace(/[^0-9]/g," ").split(" ").filter((function(e){return""!=e&&0!=e})),i=document.querySelector(".material-placeholder").offsetWidth/o[0];return console.log(o),t+("left:"+r[1]*i+"px; ")+("top:"+r[2]*i+"px; ")+("right:"+r[3]*i+"px; ")+("bottom:"+r[4]*i+"px; ")+"position: absolute; "}(this)}))}))})},function(e,t,n){e.exports=function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};t[s][0].call(u.exports,(function(e){var n=t[s][1][e];return o(n||e)}),u,u.exports,e,t,n,r)}return n[s].exports}for(var i=!1,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){var r,o,i=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(e){if(r===setTimeout)return setTimeout(e,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(e){r=s}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}}();var u,l=[],d=!1,f=-1;function h(){d&&u&&(d=!1,u.length?l=u.concat(l):f=-1,l.length&&p())}function p(){if(!d){var e=c(h);d=!0;for(var t=l.length;t;){for(u=l,l=[];++f<t;)u&&u[f].run();f=-1,t=l.length}u=null,d=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new m(e,t)),1!==l.length||d||c(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],2:[function(e,t,n){t.exports={name:"tesseract.js",version:"1.0.19",description:"Pure Javascript Multilingual OCR",main:"src/index.js",scripts:{start:'concurrently --kill-others "watchify src/index.js  -t [ envify --TESS_ENV development ] -t [ babelify --presets [ es2015 ] ] -o dist/tesseract.dev.js --standalone Tesseract" "watchify src/browser/worker.js  -t [ envify --TESS_ENV development ] -t [ babelify --presets [ es2015 ] ] -o dist/worker.dev.js" "http-server -p 7355"',build:"browserify src/index.js -t [ babelify --presets [ es2015 ] ] -o dist/tesseract.js --standalone Tesseract && browserify src/browser/worker.js -t [ babelify --presets [ es2015 ] ] -o dist/worker.js && uglifyjs dist/tesseract.js --source-map -o dist/tesseract.min.js && uglifyjs dist/worker.js --source-map -o dist/worker.min.js",release:"npm run build && git commit -am 'new release' && git push && git tag `jq -r '.version' package.json` && git push origin --tags && npm publish"},browser:{"./src/node/index.js":"./src/browser/index.js"},author:"",license:"Apache-2.0",devDependencies:{"babel-preset-es2015":"^6.16.0",babelify:"^7.3.0",browserify:"^13.1.0",concurrently:"^3.1.0",envify:"^3.4.1","http-server":"^0.9.0",pako:"^1.0.3","uglify-js":"^3.4.9",watchify:"^3.7.0"},dependencies:{"file-type":"^3.8.0","isomorphic-fetch":"^2.2.1","is-url":"1.2.2","jpeg-js":"^0.2.0","level-js":"^2.2.4","node-fetch":"^1.6.3","object-assign":"^4.1.0","png.js":"^0.2.1","tesseract.js-core":"^1.0.2"},repository:{type:"git",url:"https://github.com/naptha/tesseract.js.git"},bugs:{url:"https://github.com/naptha/tesseract.js/issues"},homepage:"https://github.com/naptha/tesseract.js"}},{}],3:[function(e,t,n){(function(t){"use strict";var r={corePath:"https://cdn.jsdelivr.net/gh/naptha/tesseract.js-core@0.1.0/index.js",langPath:"https://tessdata.projectnaptha.com/3.02/"};if("development"===t.env.TESS_ENV)console.debug("Using Development Configuration"),r.workerPath=location.protocol+"//"+location.host+"/dist/worker.dev.js?nocache="+Math.random().toString(36).slice(3);else{var o=e("../../package.json").version;r.workerPath="https://cdn.jsdelivr.net/gh/naptha/tesseract.js@"+o+"/dist/worker.js"}n.defaultOptions=r,n.spawnWorker=function(e,t){if(Blob&&URL)var n=new Blob(['importScripts("'+t.workerPath+'");'],{type:"application/javascript"}),r=new Worker(URL.createObjectURL(n));else r=new Worker(t.workerPath);return r.onmessage=function(t){var n=t.data;e._recv(n)},r},n.terminateWorker=function(e){e.worker.terminate()},n.sendPacket=function(e,t){!function e(t,n){if("string"==typeof t){if(/^\#/.test(t))return e(document.querySelector(t),n);if(/(blob|data)\:/.test(t)){var r=new Image;return r.src=t,r.onload=function(t){return e(r,n)},void(r.onerror=function(e){throw e})}var o=new XMLHttpRequest;return o.open("GET",t,!0),o.responseType="blob",o.onload=function(t){if(o.status>=400)throw new Error("Fail to get image as Blob");e(o.response,n)},o.onerror=function(e){throw e},void o.send(null)}if(t instanceof File){var i=new FileReader;return i.onload=function(t){return e(i.result,n)},i.onerror=function(e){throw e},void i.readAsDataURL(t)}if(t instanceof Blob)return e(URL.createObjectURL(t),n);if(t.getContext)return e(t.getContext("2d"),n);if("IMG"==t.tagName||"VIDEO"==t.tagName){var s=document.createElement("canvas");s.width=t.naturalWidth||t.videoWidth,s.height=t.naturalHeight||t.videoHeight;var a=s.getContext("2d");return a.drawImage(t,0,0),e(a,n)}if(t.getImageData){var c=t.getImageData(0,0,t.canvas.width,t.canvas.height);return e(c,n)}return n(t)}(t.payload.image,(function(n){t.payload.image=n,e.worker.postMessage(t)}))}}).call(this,e("_process"))},{"../../package.json":2,_process:1}],4:[function(e,t,n){"use strict";t.exports=function(e){return e.paragraphs=[],e.lines=[],e.words=[],e.symbols=[],e.blocks.forEach((function(t){t.page=e,t.lines=[],t.words=[],t.symbols=[],t.paragraphs.forEach((function(n){n.block=t,n.page=e,n.words=[],n.symbols=[],n.lines.forEach((function(r){r.paragraph=n,r.block=t,r.page=e,r.symbols=[],r.words.forEach((function(o){o.line=r,o.paragraph=n,o.block=t,o.page=e,o.symbols.forEach((function(i){i.word=o,i.line=r,i.paragraph=n,i.block=t,i.page=e,i.line.symbols.push(i),i.paragraph.symbols.push(i),i.block.symbols.push(i),i.page.symbols.push(i)})),o.paragraph.words.push(o),o.block.words.push(o),o.page.words.push(o)})),r.block.lines.push(r),r.page.lines.push(r)})),n.page.paragraphs.push(n)}))})),e}},{}],5:[function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("../node/index.js"),i=0;t.exports=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id="Job-"+ ++i+"-"+Math.random().toString(16).slice(3,8),this._instance=t,this._resolve=[],this._reject=[],this._progress=[],this._finally=[]}return r(e,[{key:"then",value:function(e,t){return this._resolve.push?this._resolve.push(e):e(this._resolve),t&&this.catch(t),this}},{key:"catch",value:function(e){return this._reject.push?this._reject.push(e):e(this._reject),this}},{key:"progress",value:function(e){return this._progress.push(e),this}},{key:"finally",value:function(e){return this._finally.push(e),this}},{key:"_send",value:function(e,t){o.sendPacket(this._instance,{jobId:this.id,action:e,payload:t})}},{key:"_handle",value:function(e){var t=e.data,n=!1;"resolve"===e.status?(0===this._resolve.length&&console.log(t),this._resolve.forEach((function(e){var n=e(t);n&&"function"==typeof n.then&&console.warn("TesseractJob instances do not chain like ES6 Promises. To convert it into a real promise, use Promise.resolve.")})),this._resolve=t,this._instance._dequeue(),n=!0):"reject"===e.status?(0===this._reject.length&&console.error(t),this._reject.forEach((function(e){return e(t)})),this._reject=t,this._instance._dequeue(),n=!0):"progress"===e.status?this._progress.forEach((function(e){return e(t)})):console.warn("Message type unknown",e.status),n&&this._finally.forEach((function(e){return e(t)}))}}]),e}()},{"../node/index.js":3}],6:[function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("./node/index.js"),i=e("./common/circularize.js"),s=e("./common/job"),a=e("../package.json").version,c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.worker=null,this.workerOptions=t,this._currentJob=null,this._queue=[]}return r(e,[{key:"recognize",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._delay((function(r){"string"==typeof n&&(n={lang:n}),n.lang=n.lang||"eng",r._send("recognize",{image:e,options:n,workerOptions:t.workerOptions})}))}},{key:"detect",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._delay((function(r){r._send("detect",{image:e,options:n,workerOptions:t.workerOptions})}))}},{key:"terminate",value:function(){this.worker&&o.terminateWorker(this),this.worker=null,this._currentJob=null,this._queue=[]}},{key:"_delay",value:function(e){var t=this;this.worker||(this.worker=o.spawnWorker(this,this.workerOptions));var n=new s(this);return this._queue.push((function(r){t._queue.shift(),t._currentJob=n,e(n)})),this._currentJob||this._dequeue(),n}},{key:"_dequeue",value:function(){this._currentJob=null,this._queue.length&&this._queue[0]()}},{key:"_recv",value:function(e){"resolve"===e.status&&"recognize"===e.action&&(e.data=i(e.data)),this._currentJob.id===e.jobId?this._currentJob._handle(e):console.warn("Job ID "+e.jobId+" not known.")}}]),e}();t.exports=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new c(Object.assign({},o.defaultOptions,t));return n.create=e,n.version=a,n}()},{"../package.json":2,"./common/circularize.js":4,"./common/job":5,"./node/index.js":3}]},{},[6])(6)}]);
//# sourceMappingURL=bundle.js.map